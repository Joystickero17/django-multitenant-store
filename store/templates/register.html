{% extends 'base.html' %}
{% load static %}

{% block content %}
		
		<div class="section p-0" id="register-app">
			<!-- container -->
			<!-- SECTION -->
		
		<div class="modal fade" data-bs-toggle="modal" data-bs-target="#registerModal" id="registerModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">Aviso</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body" id="modal-body">
						<ul>
							<li v-for="error in register_errors">
								[[error]]
							</li>
						</ul>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
						
					</div>
				</div>
			</div>
		</div>
			
			<div class="container mb-5">
				<!-- row -->
				
				<div class="row justify-content-center align-items-center" style="min-height: 450px">
					<!-- Paso 1 -->
					<Transition mode="out-in" appear>
						<div key=1 v-if="step == 1" class="col-md-12" >
							<h3>Bienvenido a MLS Shop</h3>
							<p>Este asistente lo guiara para registrarse, como primera pregunta nos gustaria saber como quisiera registrarse:</p>
							<div class="text-danger">
								<p>[[errors.user_type]]</p>
							</div>
						
							<div class="d-flex justify-content-center flex-wrap w-100">
								<div class="border rounded col-12 col-lg-3 p-2 m-2 d-flex flex-column" :class="{'text-danger border-danger':!!errors.user_type}" style="height: 280px;">
									<img src="{% static 'img/customer.svg' %}" class="w-75 h-75 mb-2" alt="">
									<div class="form-check">
										<input class="form-check-input" type="radio" name="user_type" value="customer" v-model="user_type">
										<label class="form-check-label" for="flexRadioDefault1">
											Cliente
										</label>
									</div>
								</div>
								<div class="border rounded col-12 col-lg-3 p-2 m-2 d-flex flex-column" :class="{'text-danger border-danger':!!errors.user_type}" style="height: 280px;">
									<img src="{% static 'img/shop.svg' %}" class="w-75 h-75 mb-2" alt="">
									<div class="form-check">
										<input class="form-check-input" type="radio" name="user_type" value="shop" v-model="user_type">
										<label class="form-check-label" for="flexRadioDefault1">
											Tienda
										</label>
									</div>
								</div>
								<div class="border rounded col-12 col-lg-3 p-2 m-2 d-flex flex-column" :class="{'text-danger border-danger':!!errors.user_type}" style="height: 280px;">
									<img src="{% static 'img/freelance.svg' %}" class="w-75 h-75 mb-2" alt="">
									<div class="form-check">
										<input class="form-check-input" type="radio" name="user_type" value="freelance" v-model="user_type">
										<label class="form-check-label" for="flexRadioDefault1">
											Freelance
										</label>
									</div>
								</div>
						
							</div>
							<div v-show="user_type == 'customer'" class="text-bold">
								<p class="text-justify">
									Al registrarte como cliente podras realizar compras en la plataforma, independientemente de la que tienda sea el
									producto que selecciones, tu carrito podra tener cualquier tipo de producto o servicio.
								</p>
							</div>
							<div v-show="user_type == 'shop'" class="text-bold">
								<p class="text-justify">
									Al registrarte como Tienda podras comercializar tus productos en la plataforma y ser elegible para convertirte en
									franquicia.
								</p>
							</div>
							<div v-show="user_type == 'freelance'" class="text-bold">
								<p class="text-justify">
									Al registrarte como Freelance podras obtener premios asesorando a compradores en la plataforma.
								</p>
							</div>
						</div>
						<div key=2 v-if="step == 2 && user_type == 'shop'" class="col-md-4"  >
							<h3>Excelente, ahora rellena los datos de tu tienda!</h3>
							<div class="m-2">
								<label for="">Nombre de la Empresa: <span class="text-danger">*</span></label>
								<input class="form-control" type="text" :class="{'is-invalid':this.errors.company_name}" name="" v-model="company_name">
							</div>
							<div class="m-2">
								<label for="" id="IncomeReason">Cantidad de Empleados: <span class="text-danger">*</span></label>
								<select class="form-select" name="" :class="{'is-invalid':this.errors.company_employee_number}" v-model="company_employee_number">
									<option value="1-10">1 a 10 empleados</option>
									<option value="10-50">10 a 50 empleados</option>
									<option value="50-250">50 a 250 empleados</option>
									<option value=">=250">Mayor a 250 empleados</option>
								</select>
							</div>
							<div class="m-2">
								<label for="">Ingreso Anual:</label><span class="text-danger mx-2 my-1" href="#" @click="showIncomeReason=!showIncomeReason" style="font-size: 20px; cursor: pointer;"><i class="fa fa-question-circle" aria-hidden="true"></i></span>
								
								<small class="d-block fade-animation p-2 my-1 border rounded" v-if="showIncomeReason">Esto es opcional, y se usara para para fines estadisticos internos, no vendemos los datos a terceros.</small>
								
								<input class="form-control" type="number" min='0' v-model="company_anual_income">
							</div>
							<div class="m-2">
								<label for="">RIF (jurídico):</label><span class="text-danger mx-2 my-1" href="#" @click="showRifReason=!showRifReason" style="font-size: 20px; cursor: pointer;"><i class="fa fa-question-circle" aria-hidden="true"></i></span>
								
								<small class="d-block fade-animation p-2 my-1 border rounded" v-if="showRifReason">Puedes Especificar tu RIF ahora, es completamente opcional, sin embargo, para ser elegible como franquiciado debes tener un registro de comercio.</small>
								<small class="d-block fade-animation p-2 my-1 border rounded" v-if="showRifReason">No te preocupes, aun podras publicar y vender productos.</small>
								
								<input class="form-control" type="number" min='0' v-model="rif">
							</div>
						</div>
						<!-- Fin paso 2 Empresa -->
					<!-- Paso 3 Empresa -->
					<div key=3 v-if="step == 3 && user_type == 'shop'" class="col-md-6">
						<h6 class="text-secondary">paso: [[step]]</h6>
						<h3>Seleccione la categoria principal de la empresa:</h3>
						<small>Esto nos ayuda a mejorar la busqueda para el usuario:</small>
						<div class="form-floating my-3">
							<input type="text" @input="searchCategory()" class="form-control" id="floatingInput" v-model="category_search" placeholder="Buscar">
							<label for="floatingInput">Buscar</label>
							[[company_category]]
						  </div>
						<small v-if="errors.company_main_category" class="text-danger">[[errors.company_main_category]]</small>
						<div class="my-2" :class="{'border border-danger':errors.company_main_category}" style="height:15rem;overflow-y: scroll;">
							<div v-for="category in categories" class="w-100">
								<input type="radio" class="btn-check" name="options-outlined" :id="category.id" :value="category.id" v-model="company_main_category">
								<label class="btn btn-outline-dark d-block my-4" :for="category.id">[[category.name]]</label>
							</div>
							
						</div>
						
					</div>
					<!-- Fin paso 3 Empresa -->
					<!-- Paso 2 Persona -->
					<div key=5 v-if="(step == 2 && user_type == 'customer') || (step == 4 && user_type == 'shop') || (step == 2 && user_type == 'freelance')" class="col-md-4">
						<h6 class="text-secondary">paso: [[step]]</h6>
						<h4>Escribe tu email, y una contraseña segura</h4>
						<div class="my-2">
							<label for="">Nombre:</label>
							<input :class="{'is-invalid': errors.name}" v-model="name" type="text" class="form-control" name="name">
							<small :class="{'text-danger': errors.name}">[[errors.name]]</small>
						</div>
						<div class="my-2">
							<label for="">Apellido:</label>
							<input :class="{'is-invalid': errors.last_name}"v-model="last_name" type="text" class="form-control" name="last_name">
							<small :class="{'text-danger': errors.last_name}">[[errors.last_name]]</small>
						</div>
						<div class="my-2">
							<label for="email">Correo Electrónico:</label>
							<input :class="{'is-invalid': errors.email}" v-model="email" class="form-control" type="text" name="email">
							<small :class="{'text-danger': errors.email}">[[errors.email]]</small>
						</div>
						<div class="my-2">
							<label for="phone_number">Numero Telefónico:</label>
							<input :class="{'is-invalid': errors.phone_number}" v-model="phone_number" class="form-control" type="text" name="phone_number">
							<small :class="{'text-danger': errors.phone_number}">[[errors.phone_number]]</small>
						</div>
						<!-- has-error como clase para señalar que hubo un error en el campo -->
						<div class="my-2">
							<label for="password">Contraseña:</label>
							<input :class="{'is-invalid': errors.not_equal_password || errors.password}" class="form-control" type="password" name="password" v-model="password">
							<small :class="{'text-danger': errors.password}">[[errors.password]]</small>
							<small :class="{'text-danger': errors.not_equal_password}">[[errors.not_equal_password]]</small>
						</div>
						<div class="my-2">
							<label for="password">Repite Contraseña:</label>
							<input :class="{'is-invalid': errors.not_equal_password || errors.password}" class="form-control" type="password" name="password" v-model="password_repeat">
						</div>
						<small :class="{'text-danger': errors.email_send_consent}">[[errors.email_send_consent]]</small>
						<div class="my-2 d-flex justify-content-center">
							<input :class="{'is-invalid':errors.email_send_consent}" class="form-check-input" type="checkbox" id="email_send_consent" v-model="email_send_consent">
							
							<label :class="{'text-danger': errors.email_send_consent}" class="form-check-label w-75 mx-2" style="font-size: 0.9rem;" for="email_send_consent">Permitir que MLS shop envie emails para notificaciones de compras, articulos en stock, y recibos a nombre del usuario.</label>
						</div>
					</div>
					<!-- Fin paso 2 Persona-->

					</Transition>
					
					
					
					

					
				</div>
				<div class="row">
					<div class="col-12 d-flex justify-content-center">
						<div v-show="step > 1" v-on:click="decreaseStep()" class="m-2"><button type="submit" class="primary-btn secondary-btn">Atras</button></div>
						<div class="m-2"><button v-on:click="increaseStep()" class="primary-btn">Siguiente</button></div>
					</div>
					
				</div>		
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->
			
{% endblock %}